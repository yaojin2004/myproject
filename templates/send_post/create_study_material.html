{% extends 'base.html' %}
{% load static %}

{% block title %}发布学习资料{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title mb-0">发布学习资料</h3>
        </div>
        <div class="card-body">
          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            {% if form.non_field_errors %}
            <div class="alert alert-danger">
              {% for error in form.non_field_errors %}
              {{ error }}
              {% endfor %}
            </div>
            {% endif %}

            <div class="mb-3">
              <label for="{{ form.title.id_for_label }}" class="form-label">标题</label>
              {{ form.title }}
              {% if form.title.errors %}
              <div class="text-danger">
                {% for error in form.title.errors %}
                {{ error }}
                {% endfor %}
              </div>
              {% endif %}
            </div>

            <div class="mb-3">
              <label for="{{ form.subject.id_for_label }}" class="form-label">科目</label>
              {{ form.subject }}
              {% if form.subject.errors %}
              <div class="text-danger">
                {% for error in form.subject.errors %}
                {{ error }}
                {% endfor %}
              </div>
              {% endif %}
            </div>

            <div class="mb-3">
              <label for="{{ form.material_type.id_for_label }}" class="form-label">资料类型</label>
              {{ form.material_type }}
              {% if form.material_type.errors %}
              <div class="text-danger">
                {% for error in form.material_type.errors %}
                {{ error }}
                {% endfor %}
              </div>
              {% endif %}
            </div>

            <div class="mb-3">
              <label for="{{ form.price.id_for_label }}" class="form-label">价格</label>
              {{ form.price }}
              {% if form.price.errors %}
              <div class="text-danger">
                {% for error in form.price.errors %}
                {{ error }}
                {% endfor %}
              </div>
              {% endif %}
            </div>

            <div class="mb-3">
              <label for="{{ form.content.id_for_label }}" class="form-label">内容描述</label>
              {{ form.content }}
              {% if form.content.errors %}
              <div class="text-danger">
                {% for error in form.content.errors %}
                {{ error }}
                {% endfor %}
              </div>
              {% endif %}
            </div>

            <div class="mb-3">
              <label for="{{ form.file.id_for_label }}" class="form-label">上传文件</label>
              {{ form.file }}
              <div class="form-text">支持的文件大小上限为50MB</div>
              {% if form.file.errors %}
              <div class="text-danger">
                {% for error in form.file.errors %}
                {{ error }}
                {% endfor %}
              </div>
              {% endif %}
            </div>

            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-primary">发布学习资料</button>
              <a href="{% url 'square:index' %}" class="btn btn-secondary">取消</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .card {
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
    border: none;
  }

  .card-header {
    background-color: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
  }

  .form-control:focus {
    border-color: #80bdff;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
  }

  .btn-primary {
    background-color: #0d6efd;
    border-color: #0d6efd;
  }

  .btn-primary:hover {
    background-color: #0b5ed7;
    border-color: #0a58ca;
  }

  .btn-secondary {
    background-color: #6c757d;
    border-color: #6c757d;
  }

  .btn-secondary:hover {
    background-color: #5c636a;
    border-color: #565e64;
  }
</style>
{% endblock %}